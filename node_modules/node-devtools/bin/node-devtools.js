#!/usr/bin/env node

'use strict';
var log = console.log.bind(console);
var dir = console.dir.bind(console);

var path = require('path');
var child_process = require('child_process');
var minimist = require('minimist');
var splitArgs = require('../lib/splitArgs.js');

var args_raw = process.argv.slice(2);
var args_part1 = splitArgs(args_raw).part1;
var args = minimist(args_part1, {
	alias: {
		e: 'electron',
		v: 'version'
	},
	default: {
		v: false
	}
});

var electronPath = args.electron || require('electron');
var appPath = path.join(__dirname, '../source');
var nodePath = process.execPath;

if (args.version) {
	child_process.spawn(electronPath, [appPath, nodePath].concat(args_raw), {stdio: 'inherit'});
} else {
	// child_process.spawn(electronPath, [appPath, nodePath].concat(args_raw), {stdio: 'inherit'});
	child_process.spawn(electronPath, [appPath, nodePath].concat(args_raw), {
		detached: true,
		stdio: 'ignore'
	}).unref();
}





